<!DOCTYPE html>
<html lang="en" data-accent-color="lime" data-content_root="../">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Developing Plugins - ape documentation</title><link rel="shortcut icon" href="../_static/favicon.ico"/><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="accounts" href="../commands/accounts.html" /><link rel="prev" title="CLIs" href="clis.html" />
      <link rel="canonical" href="ape/userguides/developing_plugins.html" /><script>
    function setColorMode(t){let e=document.documentElement;e.setAttribute("data-color-mode",t);let a=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,s=t;"auto"===t&&(s=a?"dark":"light"),"light"===s?(e.classList.remove("dark"),e.classList.add("light")):(e.classList.remove("light"),e.classList.add("dark"))}
    setColorMode(localStorage._theme||"auto");
  </script><link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=397bb51e" />
    <link rel="stylesheet" type="text/css" href="../_static/shibuya.css?v=c516b45e" />
    <link media="print" rel="stylesheet" type="text/css" href="../_static/print.css?v=20ff2c19" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --sy-f-text: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
  --sy-f-heading: "Inter", var(--sy-f-sys), var(--sy-f-cjk), sans-serif;
}
</style>
    <meta property="og:type" content="website"/>
<meta property="og:url" content="ape/userguides/developing_plugins.html"/>
<meta property="og:title" content="Developing Plugins"/>
<meta name="twitter:card" content="summary"/>
  </head>
<body><div class="sy-head">
  <div class="sy-head-blur"></div>
  <div class="sy-head-inner sy-container mx-auto">
    <a class="sy-head-brand" href="../index.html">
      <img class="light-logo" src="../_static/logo_grey.svg" alt="ape" height="28" loading="lazy" />
      <img class="dark-logo" src="../_static/logo_green.svg" alt="ape" height="28" loading="lazy" />
      <strong>ape</strong>
    </a>
    <div class="sy-head-nav" id="HeadNav">
      <nav class="sy-head-links"></nav>
      <div class="sy-head-extra flex items-center print:hidden"><form class="searchbox flex items-center" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <kbd>/</kbd>
</form><div class="sy-head-socials"></div></div>
    </div>
    <div class="sy-head-actions flex items-center shrink-0 print:hidden"><button class="js-theme theme-switch flex items-center"
data-aria-auto="Switch to light color mode"
data-aria-light="Switch to dark color mode"
data-aria-dark="Switch to auto color mode">
<i class="i-lucide theme-icon"></i>
</button><button class="md:hidden flex items-center js-menu" aria-label="Menu" type="button" aria-controls="HeadNav" aria-expanded="false">
        <div class="hamburger">
          <span class="hamburger_1"></span>
          <span class="hamburger_2 -translate-x-2"></span>
          <span class="hamburger_3 -translate-x-1"></span>
        </div>
      </button>
    </div>
  </div>
</div>
<div class="sy-page sy-container flex mx-auto">
  <aside id="lside" class="sy-lside md:w-72 md:shrink-0 print:hidden">
    <div class="sy-lside-inner md:sticky">
      <div class="sy-scrollbar p-6">
        <div class="globaltoc" data-expand-depth="0"><p class="caption" role="heading" aria-level="3"><span class="caption-text">User Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Developing Projects with Ape</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configure Ape</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing_plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="dependencies.html">Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="accounts.html">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile.html">Compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="reverts.html">Reverts</a></li>
<li class="toctree-l1"><a class="reference internal" href="networks.html">Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="forking_networks.html">Forking Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="publishing.html">Publishing</a></li>
<li class="toctree-l1"><a class="reference internal" href="proxy.html">Proxy Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="contract_metadata.html">Contract Creation Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="console.html">Console</a></li>
<li class="toctree-l1"><a class="reference internal" href="scripts.html">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="trace.html">Traces</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="data.html">Querying Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="clis.html">CLIs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Developing Plugins</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">CLI Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../commands/accounts.html">accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/compile.html">compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/console.html">console</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/init.html">init</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/networks.html">networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/plugins.html">plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/pm.html">pm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/run.html">run</a></li>
<li class="toctree-l1"><a class="reference internal" href="../commands/test.html">test</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Core Python Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape.html">ape</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/api.html">ape.api</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/cli.html">ape.cli</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/contracts.html">ape.contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/exceptions.html">ape.exceptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/managers.html">ape.managers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/plugins.html">ape.plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/types.html">ape.types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/utils.html">ape.utils</a></li>
</ul>
<p class="caption" role="heading" aria-level="3"><span class="caption-text">Plugin Python Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_accounts.html">ape-accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_compile.html">ape-compile</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_ethereum.html">ape-ethereum</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_ethereum.html#module-ape_ethereum.multicall">ape-ethereum.multicall</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_node.html">ape-node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_pm.html">ape-pm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../methoddocs/ape_test.html">ape-test</a></li>
</ul>

        </div>
      </div>
    </div>
  </aside>
  <div class="lside-overlay js-menu" role="button" aria-label="Close left sidebar" aria-controls="lside" aria-expanded="false"></div>
  <aside id="rside" class="sy-rside pb-3 w-64 shrink-0 order-last">
    <button class="rside-close js-menu xl:hidden" aria-label="Close Table of Contents" type="button" aria-controls="rside" aria-expanded="false">
      <i class="i-lucide close"></i>
    </button>
    <div class="sy-scrollbar sy-rside-inner px-6 xl:top-16 xl:sticky xl:pl-0 pt-6 pb-4"><div class="localtoc"><h3>On this page</h3><ul>
<li><a class="reference internal" href="#initialize-a-plugin-project">Initialize a Plugin Project</a></li>
<li><a class="reference internal" href="#implementing-api-classes">Implementing API Classes</a><ul>
<li><a class="reference internal" href="#registering-api-classes">Registering API Classes</a></li>
<li><a class="reference internal" href="#cli-plugins">CLI Plugins</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-plugins">Using Plugins</a></li>
<li><a class="reference internal" href="#logging">Logging</a><ul>
<li><a class="reference internal" href="#import-the-logger-from-the-logging-module">Import the logger from the logging module</a></li>
<li><a class="reference internal" href="#use-the-logger-from-the-ape-cli-context">Use the logger from the <code class="docutils literal notranslate"><span class="pre">@ape_cli_context</span></code></a></li>
</ul>
</li>
</ul>
</div><div id="ethical-ad-placement" data-ea-publisher="readthedocs"></div></div>
  </aside>
  <div class="rside-overlay js-menu" role="button" aria-label="Close Table of Contents" aria-controls="rside" aria-expanded="false"></div>
  <main class="sy-main w-full max-sm:max-w-full print:pt-6"><div class="sy-breadcrumbs" role="navigation">
  <div class="sy-breadcrumbs-inner flex items-center">
    <div class="md:hidden mr-3">
      <button class="js-menu" aria-label="Menu" type="button" aria-controls="lside" aria-expanded="false">
        <i class="i-lucide menu"></i>
      </button>
    </div>
    <ol class="flex-1" itemscope itemtype="https://schema.org/BreadcrumbList"><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <a itemprop="item" href="../index.html"><span itemprop="name">ape</span></a>
        <span>/</span>
        <meta itemprop="position" content="1" />
      </li><li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
        <strong itemprop="name">Developing Plugins</strong>
        <meta itemprop="position" content="2" />
      </li></ol>
    <div class="xl:hidden ml-1">
      <button class="js-menu" aria-label="Show table of contents" type="button" aria-controls="rside"
        aria-expanded="false">
        <i class="i-lucide outdent"></i>
      </button>
    </div>
  </div>
</div><div class="flex flex-col break-words justify-between">
      <div class="min-w-0 max-w-6xl px-6 pb-6 pt-8 xl:px-12">
        <article class="yue" role="main">
          <section id="developing-plugins">
<h1>Developing Plugins<a class="headerlink" href="#developing-plugins" title="Link to this heading"></a></h1>
<p>Your plugin project can be any type of python project, so long as its package name starts with <code class="docutils literal notranslate"><span class="pre">ape-</span></code> (such as <code class="docutils literal notranslate"><span class="pre">ape-ethereum</span></code>).
The module and plugin directory names must start with <code class="docutils literal notranslate"><span class="pre">ape_</span></code> (such as <code class="docutils literal notranslate"><span class="pre">ape_ethereum</span></code>).
To create an <code class="docutils literal notranslate"><span class="pre">ape</span></code> plugin, implement one or more API classes from the <code class="docutils literal notranslate"><span class="pre">ape.api</span></code> namespace and/or add key
<code class="docutils literal notranslate"><span class="pre">ape_cli_subcommands</span></code> to your entry-points list in your project’s <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>, depending on what type of plugin you want to create.
This guide is intended to assist in both of those use cases.</p>
<p>The following is a list of example plugins to use as a reference when developing plugins:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/apeworx/ape-solidity">the Solidity plugin</a>, an example <code class="docutils literal notranslate"><span class="pre">CompilerAPI</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/apeworx/ape-infura">the Infura plugin</a>, an example <code class="docutils literal notranslate"><span class="pre">ProviderAPI</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/apeworx/ape-trezor">the Trezor plugin</a>, an example <code class="docutils literal notranslate"><span class="pre">AccountAPI</span></code></p></li>
<li><p><a class="reference external" href="https://github.com/apeworx/ape-tokens">the Tokenlists plugin</a>, an example CLI Extension</p></li>
</ul>
<section id="initialize-a-plugin-project">
<h2>Initialize a Plugin Project<a class="headerlink" href="#initialize-a-plugin-project" title="Link to this heading"></a></h2>
<p>As previously mentioned, a plugin project is merely a python project.
However, you can optionally use this <a class="reference external" href="https://github.com/ApeWorX/project-template">project template</a> for initializing your plugin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This template is primarily designed for plugins built within the ApeWorX team organization; not everything may apply.</p>
</div>
<p>It is okay to delete anything that does not work or that you don’t find helpful.
The template may be good to follow if you want to keep your plugin of similar quality to plugins developed by the ApeWorX team.</p>
</section>
<section id="implementing-api-classes">
<h2>Implementing API Classes<a class="headerlink" href="#implementing-api-classes" title="Link to this heading"></a></h2>
<p>API classes (classes from the <code class="docutils literal notranslate"><span class="pre">ape.api</span></code> namespace) are primarily composed of abstract methods and properties that plugins must implement.
A benefit of the plugin system is that each plugin can implement these however they need, so long as they conform to the API interface.
Two plugins with the same API may do entirely different things and yet be interchangeable in their usage.</p>
<p>To implement an API, import its class and use it as a base-class in your implementation class.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The plugin will fail to work properly if you do not implement all the abstract methods.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">ape.api</span><span class="w"> </span><span class="kn">import</span> <span class="n">ProviderAPI</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">web3</span><span class="w"> </span><span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>
</span><span data-line="3">
</span><span data-line="4">
</span><span data-line="5"><span class="k">class</span><span class="w"> </span><span class="nc">MyProvider</span><span class="p">(</span><span class="n">ProviderAPI</span><span class="p">):</span>
</span><span data-line="6">    <span class="n">_web3</span><span class="p">:</span> <span class="n">Web3</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># type: ignore</span>
</span><span data-line="7">    
</span><span data-line="8">    <span class="k">def</span><span class="w"> </span><span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span data-line="9">        <span class="bp">self</span><span class="o">.</span><span class="n">_web3</span>  <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="s2">&quot;https://localhost:1337&quot;</span><span class="p">)))</span>
</span><span data-line="10">
</span><span data-line="11"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Implement rest of abstract methods&quot;&quot;&quot;</span>
</span></pre></div>
</div>
<section id="registering-api-classes">
<h3>Registering API Classes<a class="headerlink" href="#registering-api-classes" title="Link to this heading"></a></h3>
<p>Once you have finished implementing your API classes, you need to register them using the <a class="reference external" href="../methoddocs/plugins.html#ape.plugins.register">&#64;plugins.register</a> method decorator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">ape</span><span class="w"> </span><span class="kn">import</span> <span class="n">plugins</span>
</span><span data-line="2">
</span><span data-line="3"><span class="c1"># Here, we register our provider plugin so we can use it in &#39;ape&#39;.</span>
</span><span data-line="4"><span class="nd">@plugins</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">plugins</span><span class="o">.</span><span class="n">ProviderPlugin</span><span class="p">)</span>
</span><span data-line="5"><span class="k">def</span><span class="w"> </span><span class="nf">providers</span><span class="p">():</span>
</span><span data-line="6">    <span class="c1"># NOTE: By keeping this import local, we avoid slower plugin load times.</span>
</span><span data-line="7">    <span class="kn">from</span><span class="w"> </span><span class="nn">ape_my_plugin.provider</span><span class="w"> </span><span class="kn">import</span> <span class="n">MyProvider</span>
</span><span data-line="8">    
</span><span data-line="9">    <span class="c1"># NOTE: &#39;MyProvider&#39; defined in a prior code-block.</span>
</span><span data-line="10">    <span class="k">yield</span> <span class="s2">&quot;ethereum&quot;</span><span class="p">,</span> <span class="s2">&quot;local&quot;</span><span class="p">,</span> <span class="n">MyProvider</span>
</span></pre></div>
</div>
<p>This decorator hooks into ape core and ties everything together by looking for all local installed site-packages that start with <code class="docutils literal notranslate"><span class="pre">ape_</span></code>.
Then, it will loop through these potential <code class="docutils literal notranslate"><span class="pre">ape</span></code> plugins and see which ones have created a plugin type registration.
If the plugin type registration is found, then <code class="docutils literal notranslate"><span class="pre">ape</span></code> knows this package is a plugin and attempts to process it according to its registration interface.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Ensure your plugin’s <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file imports quickly by keeping all expensive imports in the hook functions locally.
This helps Ape register plugins faster, which is required when checking for API implementations.</p>
</div>
</section>
<section id="cli-plugins">
<h3>CLI Plugins<a class="headerlink" href="#cli-plugins" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">ape</span></code> CLI is built using the python package <a class="reference external" href="https://palletsprojects.com/p/click/">click</a>.
To create a CLI plugin, create any type of <code class="docutils literal notranslate"><span class="pre">click</span></code> command (such as a <code class="docutils literal notranslate"><span class="pre">click.group</span></code> or a <code class="docutils literal notranslate"><span class="pre">click.command</span></code>).</p>
<p><code class="docutils literal notranslate"><span class="pre">_cli.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
</span><span data-line="2">
</span><span data-line="3"><span class="nd">@click</span><span class="o">.</span><span class="n">group</span>
</span><span data-line="4"><span class="k">def</span><span class="w"> </span><span class="nf">cli</span><span class="p">():</span>
</span><span data-line="5"><span class="w">    </span><span class="sd">&quot;&quot;&quot;My custom commands.&quot;&quot;&quot;</span>
</span><span data-line="6">
</span><span data-line="7">
</span><span data-line="8"><span class="nd">@cli</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span data-line="9"><span class="k">def</span><span class="w"> </span><span class="nf">my_sub_cmd</span><span class="p">():</span>
</span><span data-line="10"><span class="w">    </span><span class="sd">&quot;&quot;&quot;My subcommand.&quot;&quot;&quot;</span>
</span></pre></div>
</div>
<p>Then, register it using <code class="docutils literal notranslate"><span class="pre">entrypoints</span></code>, which is a built-in python registry of items declared in <code class="docutils literal notranslate"><span class="pre">setup.py</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="o">...</span>
</span><span data-line="2"><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
</span><span data-line="3">    <span class="s2">&quot;ape_cli_subcommands&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span data-line="4">        <span class="s2">&quot;ape_myplugin=ape_myplugin._cli:cli&quot;</span><span class="p">,</span>
</span><span data-line="5">    <span class="p">],</span>
</span><span data-line="6"><span class="p">},</span>
</span><span data-line="7"><span class="o">...</span>
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Typically, a <code class="docutils literal notranslate"><span class="pre">_cli.py</span></code> module is used instead of a <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> module for the location of the Click CLI group because it is logically separate from the Python module loading process.</p>
</div>
<p>If you try to define them together and use <code class="docutils literal notranslate"><span class="pre">ape</span></code> as a library as well, there is a race condition in the loading process that will prevent the CLI plugin from working.</p>
<p>For common <code class="docutils literal notranslate"><span class="pre">click</span></code> usages, use the <code class="docutils literal notranslate"><span class="pre">ape.cli</span></code> namespace.
For example, use the <a class="reference external" href="../methoddocs/cli.html#ape.cli.arguments.existing_alias_argument">&#64;existing_alias_argument() decorator</a>) when you need a CLI argument for specifying an existing account alias:
Follow <a class="reference external" href="./clis.html">this guide</a> to learn more about what you can do with the utilities found in <code class="docutils literal notranslate"><span class="pre">ape.cli</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
</span><span data-line="2"><span class="kn">from</span><span class="w"> </span><span class="nn">ape.cli</span><span class="w"> </span><span class="kn">import</span> <span class="n">existing_alias_argument</span>
</span><span data-line="3">
</span><span data-line="4"><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span data-line="5"><span class="nd">@existing_alias_argument</span><span class="p">()</span>
</span><span data-line="6"><span class="k">def</span><span class="w"> </span><span class="nf">my_cmd</span><span class="p">(</span><span class="n">alias</span><span class="p">):</span>
</span><span data-line="7">  <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">alias</span><span class="si">}</span><span class="s2"> is an existing account!&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
</section>
<section id="using-plugins">
<h2>Using Plugins<a class="headerlink" href="#using-plugins" title="Link to this heading"></a></h2>
<p>Once you have finished implementing and registering your API classes, they will now be part of <code class="docutils literal notranslate"><span class="pre">ape</span></code>. For example,
if you implemented the <code class="docutils literal notranslate"><span class="pre">AccountAPI</span></code>, you can now use accounts created from this plugin. The top-level <code class="docutils literal notranslate"><span class="pre">ape</span></code> manager
classes are indifferent about the source of the plugin.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">ape</span><span class="w"> </span><span class="kn">import</span> <span class="n">accounts</span>
</span><span data-line="2">
</span><span data-line="3"><span class="c1"># The manager can load accounts from any account-based plugin.</span>
</span><span data-line="4"><span class="n">my_ledger_account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;ledger_0&quot;</span><span class="p">)</span>  <span class="c1"># Created using the &#39;ape-ledger&#39; plugin</span>
</span><span data-line="5"><span class="n">my_trezor_account</span> <span class="o">=</span> <span class="n">accounts</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;trezor_0&quot;</span><span class="p">)</span>  <span class="c1"># Created using the &#39;ape-trezor&#39; plugin</span>
</span></pre></div>
</div>
<p>Similarly, if you implemented a <code class="docutils literal notranslate"><span class="pre">ProviderAPI</span></code>, that provider is now accessible in the CLI via the <code class="docutils literal notranslate"><span class="pre">--network</span></code> option:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span data-line="1">ape<span class="w"> </span>console<span class="w"> </span>my_script<span class="w"> </span>--network<span class="w"> </span>ethereum:local:my_provider_plugin
</span></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">--network</span></code> option is available on the commands <code class="docutils literal notranslate"><span class="pre">test</span></code> and <code class="docutils literal notranslate"><span class="pre">console</span></code> as well as any CLI command that uses the <a class="reference external" href="../methoddocs/cli.html?highlight=network_option#ape.cli.options.network_option">network option decorator</a>.</p>
</div>
<p>To learn more about networks in Ape, follow <a class="reference external" href="./networks.html">this guide</a>.</p>
<p>When creating the CLI-based plugins, you should see your CLI command as a top-level command in the <code class="docutils literal notranslate"><span class="pre">ape</span> <span class="pre">--help</span></code> output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="n">Commands</span><span class="p">:</span>
</span><span data-line="2">  <span class="o">...</span>
</span><span data-line="3">  <span class="n">my</span><span class="o">-</span><span class="n">plugin</span>  <span class="n">Utilities</span> <span class="k">for</span> <span class="n">my</span> <span class="n">plugin</span>
</span><span data-line="4">  <span class="o">...</span>
</span></pre></div>
</div>
<p>To edit the description of the CLI command (or group), you can either set the <code class="docutils literal notranslate"><span class="pre">short_help</span></code> kwarg or use a doc-str on the command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
</span><span data-line="2">
</span><span data-line="3">
</span><span data-line="4"><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="n">short_help</span><span class="o">=</span><span class="s2">&quot;Utilities for my plugin&quot;</span><span class="p">)</span>
</span><span data-line="5"><span class="k">def</span><span class="w"> </span><span class="nf">cli</span><span class="p">():</span>
</span><span data-line="6">    <span class="k">pass</span>
</span><span data-line="7">
</span><span data-line="8"><span class="sd">&quot;&quot;&quot; Or &quot;&quot;&quot;</span>
</span><span data-line="9">
</span><span data-line="10"><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
</span><span data-line="11"><span class="k">def</span><span class="w"> </span><span class="nf">cli</span><span class="p">():</span>
</span><span data-line="12"><span class="w">    </span><span class="sd">&quot;&quot;&quot;Utilities for my plugin&quot;&quot;&quot;</span>
</span></pre></div>
</div>
</section>
<section id="logging">
<h2>Logging<a class="headerlink" href="#logging" title="Link to this heading"></a></h2>
<p>Use Ape’s logger in your plugin by importing it from the <code class="docutils literal notranslate"><span class="pre">ape.logging</span></code> module or by using it off the CLI context (from using the <code class="docutils literal notranslate"><span class="pre">&#64;ape_cli_context</span></code> decorator).</p>
<section id="import-the-logger-from-the-logging-module">
<h3>Import the logger from the logging module<a class="headerlink" href="#import-the-logger-from-the-logging-module" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">ape.logging</span><span class="w"> </span><span class="kn">import</span> <span class="n">logger</span>
</span><span data-line="2">
</span><span data-line="3"><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;This is a log message&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
<section id="use-the-logger-from-the-ape-cli-context">
<h3>Use the logger from the <code class="docutils literal notranslate"><span class="pre">&#64;ape_cli_context</span></code><a class="headerlink" href="#use-the-logger-from-the-ape-cli-context" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span data-line="1"><span class="kn">from</span><span class="w"> </span><span class="nn">ape.cli</span><span class="w"> </span><span class="kn">import</span> <span class="n">ape_cli_context</span>
</span><span data-line="2">
</span><span data-line="3"><span class="nd">@ape_cli_context</span><span class="p">()</span>
</span><span data-line="4"><span class="k">def</span><span class="w"> </span><span class="nf">my_command</span><span class="p">(</span><span class="n">cli_ctx</span><span class="p">):</span>
</span><span data-line="5">  <span class="n">cli_ctx</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;my log message&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
</section>
</section>
</section>

        </article><button class="back-to-top" type="button">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
  </svg>
  <span>Back to top</span>
</button><div class="navigation flex print:hidden"><div class="navigation-prev">
    <a href="clis.html">
      <i class="i-lucide chevron-left"></i>
      <div class="page-info">
        <span>Previous</span><div class="title">CLIs</div></div>
    </a>
  </div><div class="navigation-next">
    <a href="../commands/accounts.html">
      <div class="page-info">
        <span>Next</span>
        <div class="title">accounts</div>
      </div>
      <i class="i-lucide chevron-right"></i>
    </a>
  </div></div></div>
    </div>
  </main>
</div>
<footer class="sy-foot">
  <div class="sy-foot-inner sy-container mx-auto">
    <div class="sy-foot-reserved md:flex justify-between items-center">
      <div class="sy-foot-copyright"><p>2024, ApeWorX LTD</p>
  
  <p>
    Made with
    
    <a href="https://www.sphinx-doc.org/">Sphinx</a> and
    
    <a href="https://shibuya.lepture.com">Shibuya theme</a>.
  </p>
</div>
      <div class="sy-foot-socials"></div>
    </div>
  </div>
</footer>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script data-domain="docs.apeworx.io" defer="defer" src="https://plausible.io/js/script.js"></script>
      <script src="../_static/shibuya.js?v=e2230717"></script></body>
</html>